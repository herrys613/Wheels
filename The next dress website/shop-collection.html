<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Shop Collection | The Next Dress</title>
    <meta name="description" content="Find your next dress today. Easily browse styles, colors, and sizes you love.">

    <meta property="og:type" content="website">
    <meta property="og:title" content="Shop Collection | The Next Dress">
    <meta property="og:description"
        content="Find your next dress today. Easily browse styles, colors, and sizes you love.">
    <meta property="og:url" content="https://www.thenextdress.com/shop-collection/">
    <meta property="og:image" content="https://www.thenextdress.com/images/shop-collection-social-preview.png">
    <meta property="og:image:alt" content="Browse and shop modest dresses online at The Next Dress">
    <meta property="og:site_name" content="The Next Dress">

    <link rel="icon" type="image/png" href="/images/favicon.png" sizes="32x32">
    <link rel="canonical" href="https://www.thenextdress.com/shop-collection/">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/style.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="/tailwind.config.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
</head>
<style>
    /* Loading animation */
    .loading-dots {
        display: inline-flex;
        gap: 4px;
    }

    .loading-dot {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        background: #8B7F7F;
        animation: pulse 1.4s ease-in-out infinite both;
    }

    .loading-dot:nth-child(2) {
        animation-delay: 0.2s;
    }

    .loading-dot:nth-child(3) {
        animation-delay: 0.4s;
    }

    .loading-dot:nth-child(4) {
        animation-delay: 0.6s;
    }

    @keyframes pulse {

        0%,
        80%,
        100% {
            transform: scale(0.8);
            opacity: 0.5;
        }

        40% {
            transform: scale(1);
            opacity: 1;
        }
    }

    /* Image Slider Dots */
    .image-slider-container {
        position: relative;
        overflow: hidden;
    }

    .slider-dots {
        position: absolute;
        bottom: 8px;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        justify-content: center;
        gap: 6px;
        z-index: 10;
    }

    .slider-dot {
        width: 4px;
        height: 4px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.5);
        cursor: pointer;
        transition: all 0.2s ease;
        backdrop-filter: blur(4px);
    }

    .slider-dot.active {
        background: white;
        transform: scale(1.2);
    }

    .slider-dot:hover {
        background-color: rgba(255, 255, 255, 0.8);
        transform: scale(1.1);
    }

    /* Navigation arrows */
    .slider-nav {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        width: 32px;
        height: 32px;
        background: rgba(255, 255, 255, 0.9);
        border: none;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        z-index: 10;
        opacity: 0;
        transition: all 0.2s ease;
        backdrop-filter: blur(4px);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .slider-nav:hover {
        background: rgba(255, 255, 255, 1);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }

    .slider-nav.prev {
        left: 8px;
    }

    .slider-nav.next {
        right: 8px;
    }

    .image-slider-container:hover .slider-nav {
        opacity: 1;
    }

    .single-image .slider-nav {
        display: none;
    }
</style>

<body>
    <!-- Navbar -->
    <header class="bg-white border-b border-gray-200">
        <nav x-data="{ isOpen: false }" class="max-w-[2000px] p-5 mx-auto lg:px-8 lg:py-5">
            <div class="flex justify-between items-center relative">
                <!-- Logo -->
                <a href="/">
                    <img class="h-8 sm:h-10" src="/images/logo.png" alt="logo">
                </a>

                <!-- Desktop Navigation -->
                <div class="hidden lg:flex absolute left-1/2 transform -translate-x-1/2 space-x-12">
                    <a href="/" class="text-charcoal-800 hover:text-warm-gray-400 transition duration-300">Home</a>
                    <a href="/shop-collection.html"
                        class="text-charcoal-800 hover:text-warm-gray-400 transition duration-300">Shop
                        Collection</a>
                    <a href="/sell-your-dress.html"
                        class="text-charcoal-800 hover:text-warm-gray-400 transition duration-300">Sell
                        Your Dress</a>
                    <a href="/about-us.html"
                        class="text-charcoal-800 hover:text-warm-gray-400 transition duration-300">About
                        us</a>
                    <a href="/contact.html"
                        class="text-charcoal-800 hover:text-warm-gray-400 transition duration-300">Contact</a>
                </div>


                <!-- Login -->
                <div class="hidden lg:flex items-center">
                    <a class="block px-5 py-2 mt-4 text-sm text-center capitalize bg-charcoal-800 text-cream-500 hover:bg-charcoal-900 rounded-lg lg:mt-0 lg:w-auto"
                        href="/login.html">
                        Log in
                    </a>
                </div>

                <!-- Mobile menu button -->
                <div class="flex lg:hidden">
                    <button x-cloak @click="isOpen = !isOpen" type="button"
                        class="text-charcoal-800  hover:text-charcoal-900  focus:outline-none focus:text-charcoal-900"
                        aria-label="toggle menu">
                        <svg x-show="!isOpen" xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none"
                            viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M4 8h16M4 16h16" />
                        </svg>

                        <svg x-show="isOpen" xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none"
                            viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Mobile Menu open: "block", Menu closed: "hidden"-->
            <div x-cloak :class="[isOpen ? 'translate-x-0 opacity-100 ' : 'opacity-0 -translate-x-full']"
                class="lg:hidden absolute inset-x-0 transition-all duration-300 ease-in-out bg-white border-b border-gray-200 shadow-lg z-40">
                <div class="px-4 py-6 space-y-4">
                    <a href="/"
                        class="block text-charcoal-800 hover:text-warm-gray-400 font-medium transition-colors duration-300">Home</a>
                    <a href="/shop-collection.html"
                        class="block text-charcoal-800 hover:text-warm-gray-400 font-medium transition-colors duration-300">Shop
                        Collection</a>
                    <a href="/sell-your-dress.html"
                        class="block text-charcoal-800 hover:text-warm-gray-400 font-medium transition-colors duration-300">Sell
                        Your Dress</a>
                    <a href="/about-us.html"
                        class="block text-charcoal-800 hover:text-warm-gray-400 font-medium transition-colors duration-300">About
                        us</a>
                    <a href="/contact.html"
                        class="block text-charcoal-800 hover:text-warm-gray-400 font-medium transition-colors duration-300">Contact</a>
                    <a class="block px-5 py-2 mt-4 text-sm text-center capitalize bg-charcoal-800 text-cream-500 hover:bg-charcoal-900 rounded-lg lg:mt-0 lg:w-auto"
                        href="/login.html">
                        Log in
                    </a>
                </div>
            </div>
        </nav>
    </header>

    <div class="max-w-[2000px] mx-auto flex flex-col md:flex-row lg:min-h-screen relative">
        <!-- FilterSidebar -->
        <aside class="absolute top-0 left-0 z-50 h-full w-2/3 bg-white shadow-lg transform transition-transform duration-500
         -translate-x-full lg:translate-x-0 lg:static lg:w-[300px] lg:h-auto lg:shadow-none lg:border-r lg:space-y-4"
            id="filterSidebar">
            <div class="filter-sidebar-scroll px-6 py-2">
                <div class="flex justify-end py-2 lg:hidden">
                    <button id="closeFilterBtn" onclick="DressApp.UI.closeFilterSidebar()"
                        class="text-charcoal-600 hover:text-black">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="flex justify-between items-center mb-2">
                    <h2 class="text-xl font-semibold">Filters</h2>
                    <button onclick="DressApp.Filters.resetFilters()"
                        class="text-sm text-warm-gray-500 hover:underline font-medium">
                        Reset All
                    </button>
                </div>

                <!-- Price Range -->
                <div>
                    <button onclick="DressApp.UI.toggleSection('price')"
                        class="w-full flex justify-between items-center font-medium text-left py-2 px-1 border-b border-gray-200 hover:bg-gray-50">
                        Price
                        <span id="icon-price">+</span>
                    </button>
                    <div id="section-price" class="mt-5 hidden">
                        <input type="range" id="priceRange" min="100" max="5000" step="100" class="w-full" value="5000"
                            oninput="DressApp.Filters.updatePriceLabel()">
                        <p class="text-sm text-charcoal-600 mt-1">Up to $<span id="priceLabel">5000</span></p>
                    </div>
                </div>

                <!-- Sizes -->
                <div>
                    <button onclick="DressApp.UI.toggleSection('sizes')"
                        class="w-full flex justify-between items-center font-medium text-left py-2 px-1 border-b border-gray-200 hover:bg-gray-50">
                        Sizes
                        <span id="icon-sizes">+</span>
                    </button>
                    <div id="section-sizes" class="mt-5 space-y-1 hidden">
                        <!-- Populated by JavaScript -->
                    </div>
                </div>

                <!-- Brands -->
                <div>
                    <button onclick="DressApp.UI.toggleSection('brands')"
                        class="w-full flex justify-between items-center font-medium text-left py-2 px-1 border-b border-gray-200 hover:bg-gray-50">
                        Brands
                        <span id="icon-brands">+</span>
                    </button>
                    <div id="section-brands" class="mt-5 space-y-1 hidden">
                        <!-- Populated by JavaScript -->
                    </div>
                </div>

                <!-- Colors -->
                <div>
                    <button onclick="DressApp.UI.toggleSection('colors')"
                        class="w-full flex justify-between items-center font-medium text-left py-2 px-1 border-b border-gray-200 hover:bg-gray-50">
                        Colors
                        <span id="icon-colors">+</span>
                    </button>
                    <div id="section-colors" class="mt-5 space-y-1 hidden">
                        <!-- Populated by JavaScript -->
                    </div>
                </div>

                <!-- Condition -->
                <div>
                    <button onclick="DressApp.UI.toggleSection('condition')"
                        class="w-full flex justify-between items-center font-medium text-left py-2 px-1 border-b border-gray-200 hover:bg-gray-50">
                        Condition
                        <span id="icon-condition">+</span>
                    </button>
                    <div id="section-condition" class="mt-5 space-y-1 hidden">
                        <!-- Populated by JavaScript -->
                    </div>
                </div>

                <!-- Category -->
                <div>
                    <button onclick="DressApp.UI.toggleSection('category')"
                        class="w-full flex justify-between items-center font-medium text-left py-2 px-1 border-b border-gray-200 hover:bg-gray-50">
                        Category
                        <span id="icon-category">+</span>
                    </button>
                    <div id="section-category" class="mt-5 space-y-1 hidden">
                        <!-- Populated by JavaScript -->
                    </div>
                </div>

                <!-- Apply Filters Button -->
                <div class="mt-6">
                    <button onclick="DressApp.Filters.applyFilters()"
                        class="w-full bg-black text-white font-semibold py-2 px-4 rounded-lg hover:bg-warm-gray-500 transition duration-200">
                        Apply Filters
                    </button>
                </div>
        </aside>


        <main id="dresses-container" class="flex-1 p-5 min-h-screen">
            <!-- Header with Search -->
            <div class="mb-3">
                <div class="flex flex-col gap-4">
                    <!-- Title and Search Row -->
                    <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4">
                        <div class="flex items-center justify-between">
                            <h1 class="text-xl font-bold text-charcoal-800">Dress Listings</h1>
                            <div class="text-xs text-charcoal-600 block lg:hidden whitespace-nowrap">
                                <span id="results-count">0</span> dresses found
                            </div>
                        </div>

                        <!-- Search Bar -->
                        <div class="relative w-full lg:w-96">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i class="fas fa-search text-gray-400"></i>
                            </div>
                            <input id="search-bar" type="text" placeholder="Search listings..."
                                onkeyup="DressApp.refreshDisplay()"
                                class="w-full text-sm pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-charcoal-500 focus:border-transparent" />
                        </div>
                    </div>

                    <!-- Controls Row -->
                    <div class="flex items-center justify-between gap-3">
                        <!-- Sort By, Filter Pills and show sold -->
                        <div class="flex items-center justify-between gap-3 w-full lg:w-auto">
                            <div class="flex items-center gap-3">
                                <!-- Sort By Dropdown -->
                                <div class="relative" x-data="{ open: false }">
                                    <button @click="open = !open" @click.away="open = false"
                                        class="flex items-center gap-2 px-4 py-2 text-xs font-medium text-gray-700 bg-white border border-gray-300 rounded-full hover:bg-gray-50 focus:outline-none focus:ring-1 focus:ring-charcoal-500 focus:border-transparent transition-colors">
                                        <i class="fas fa-sort text-gray-500"></i>
                                        <span id="sort-label">Sort By</span>
                                        <i class="fas fa-chevron-down text-xs text-gray-500 transition-transform"
                                            :class="{ 'rotate-180': open }"></i>
                                    </button>

                                    <div x-show="open" style="display: none;"
                                        x-transition:enter="transition ease-out duration-200"
                                        x-transition:enter-start="opacity-0 scale-95"
                                        x-transition:enter-end="opacity-100 scale-100"
                                        x-transition:leave="transition ease-in duration-150"
                                        x-transition:leave-start="opacity-100 scale-100"
                                        x-transition:leave-end="opacity-0 scale-95"
                                        class="absolute top-full left-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-20">
                                        <div class="py-1">
                                            <button onclick="DressApp.Sorting.sortDresses('price-low')"
                                                class="w-full text-left px-4 py-2 text-xs text-gray-700 hover:bg-gray-50 transition-colors">
                                                Price: Low to High
                                            </button>
                                            <button onclick="DressApp.Sorting.sortDresses('price-high')"
                                                class="w-full text-left px-4 py-2 text-xs text-gray-700 hover:bg-gray-50 transition-colors">
                                                Price: High to Low
                                            </button>
                                            <button onclick="DressApp.Sorting.sortDresses('newest')"
                                                class="w-full text-left px-4 py-2 text-xs text-gray-700 hover:bg-gray-50 transition-colors">
                                                Newest First
                                            </button>
                                            <button onclick="DressApp.Sorting.sortDresses('oldest')"
                                                class="w-full text-left px-4 py-2 text-xs text-gray-700 hover:bg-gray-50 transition-colors">
                                                Oldest First
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <!-- Filter Toggle Button -->
                                <button id="filter-toggle" onclick="DressApp.UI.toggleFilterSidebar()"
                                    class="flex items-center gap-2 px-4 py-2 text-xs font-medium text-gray-700 bg-white border border-gray-300 rounded-full hover:bg-gray-50 focus:outline-none focus:ring-1 focus:ring-charcoal-500 focus:border-transparent transition-colors lg:hidden">
                                    <i class="fas fa-filter text-gray-500"></i>
                                    <span>Filter</span>
                                </button>
                            </div>

                            <!-- Show Sold Btn -->
                            <div class="flex items-center">
                                <span class="mr-3 text-xs text-charcoal-700">Show Sold</span>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" id="toggle-sold-btn" class="sr-only peer"
                                        onchange="DressApp.toggleShowSold()">
                                    <div
                                        class="w-11 h-6 bg-gray-200 rounded-full peer-checked:bg-cream-800 transition-all duration-300">
                                    </div>
                                    <div
                                        class="absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow-md transform transition-all peer-checked:translate-x-full">
                                    </div>
                                </label>
                            </div>
                        </div>

                        <!-- Desktop Results Count -->
                        <div class="hidden lg:block text-xs text-charcoal-600">
                            <span id="results-count-desktop">0</span> dresses found
                        </div>
                    </div>

                    <!-- Active Filters Pills -->
                    <div id="active-filters"
                        class="flex items-center gap-2 overflow-x-auto overflow-y-hidden whitespace-nowrap scrollbar-hide">
                        <!-- Active filter pills will be populated here -->
                    </div>
                </div>
            </div>


            <!-- Loading State -->
            <div id="loading-wrapper" class="flex justify-center items-center h-64">
                <div class="text-center">
                    <div class="loading-dots mb-4">
                        <div class="loading-dot"></div>
                        <div class="loading-dot"></div>
                        <div class="loading-dot"></div>
                        <div class="loading-dot"></div>
                    </div>
                    <p class="text-charcoal-600">Loading dress collection...</p>
                </div>
            </div>

            <!-- Listings Grid -->
            <div id="dress-cards-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3  gap-6">
                <!-- Cards will be populated by JavaScript -->
            </div>

            <!-- No Results Message -->
            <div id="no-match-message" class="text-center py-12 hidden">
                <i class="fas fa-search text-gray-300 text-4xl mb-4"></i>
                <h3 class="text-lg font-medium text-charcoal-800 mb-2">No dresses found</h3>
                <p class="text-charcoal-600">Try adjusting your search criteria or check back later for new listings</p>
            </div>
        </main>
    </div>

    <!-- Footer -->
    <footer class="bg-cream-200 border-t">
        <div class="max-w-[2000px] p-6 lg:pt-10 lg:px-16 mx-auto">
            <div class="lg:flex">
                <div class="w-full pb-8 lg:w-2/5">
                    <a href="/">
                        <img class="w-auto h-9" src="/images/logo.png" alt="logo">
                    </a>
                    <p class="max-w-sm text-xs text-charcoal-800">Modest Dress Marketplace.</p>
                    <div class="flex space-x-4 mt-4">
                        <a href="https://wa.me/9175837073" target="_blank" class="text-charcoal-800 text-2xl"
                            aria-label="Chat on WhatsApp">
                            <i class="fab fa-whatsapp"></i>
                        </a>
                        <a href="https://instagram.com/" target="_blank" class="text-charcoal-800 text-2xl"
                            aria-label="Visit Instagram">
                            <i class="fab fa-instagram"></i>
                        </a>
                    </div>
                </div>

                <div class="mt-0 lg:mt-0 lg:flex-1">
                    <div class="grid grid-cols-1 gap-6 sm:grid-cols-2 md:grid-cols-3">
                        <div>
                            <h3 class="text-charcoal-800 font-semibold ">Company</h3>
                            <a href="/shop-collection/"
                                class="block mt-2 text-sm text-charcoal-600  hover:underline">Shop
                                Collection</a>
                            <a href="/sell-your-dress/"
                                class="block mt-2 text-sm text-charcoal-600  hover:underline">Sell
                                Your Dress</a>
                            <a href="/contact/" class="block mt-2 text-sm text-charcoal-600  hover:underline">Partner
                                with
                                Us</a>
                        </div>

                        <div>
                            <h3 class="text-charcoal-800 font-semibold ">Support</h3>
                            <a href="/#faq" class="block mt-2 text-sm text-charcoal-600  hover:underline">FAQ</a>
                            <a href="/pricing/"
                                class="block mt-2 text-sm text-charcoal-600  hover:underline">Pricing</a>
                            <a href="/contact/" class="block mt-2 text-sm text-charcoal-600  hover:underline">Contact
                                Us</a>
                        </div>

                        <div>
                            <h3 class="text-charcoal-800 font-semibold ">Get in touch</h3>
                            <span class="block mt-2 text-sm text-charcoal-600  hover:underline">+1 (555)
                                000-0000</span>
                            <span
                                class="block mt-2 text-sm text-charcoal-600  hover:underline">thenextdresscollection@gmail.com</span>
                        </div>
                    </div>
                </div>
            </div>

            <hr class="h-px my-6 bg-gray-200 border-none ">

            <div>
                <p class="text-center text-charcoal-600">&copy;
                    <script>
                        document.write(new Date().getFullYear())
                    </script> The next dress. All rights reserved.
                </p>
            </div>
        </div>
    </footer>

    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore-compat.js"></script>
    <script>
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDzYucxzEhmH3XgxGZd_YODxzzvpNp2P0s",
            authDomain: "project-2145d.firebaseapp.com",
            projectId: "project-2145d",
            storageBucket: "project-2145d.firebasestorage.app",
            messagingSenderId: "296278039161",
            appId: "1:296278039161:web:e1049596a67bfe51ab12a8"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // ============================================
        // MAIN APPLICATION NAMESPACE
        // ============================================
        const DressApp = {
            // Store all application data
            data: {
                allDresses: [],        // All approved dresses from database
                displayedDresses: [],  // Currently displayed dresses after filtering/sorting
                showSold: false,       // Toggle state for showing sold items
                searchTerm: '',        // Current search term
                currentSort: '',       // Current sort type
                activeFilters: {       // Currently active filters
                    price: 5000,
                    sizes: [],
                    brands: [],
                    colors: [],
                    condition: [],
                    category: []
                }
            },

            // Initialize the application
            async init() {
                console.log('Initializing Dress Application...');

                // Setup filter UI
                this.UI.initializeFilterSections();

                // Load dresses from Firebase
                await this.Database.loadDresses();

                // Display initial dresses
                this.refreshDisplay();
            },

            // Main refresh function - applies all filters, search, and sorting
            refreshDisplay() {
                console.log('Refreshing display...');

                // Start with all approved dresses
                let dressesToShow = [...this.data.allDresses];

                // Step 1: Filter by sold status
                if (!this.data.showSold) {
                    dressesToShow = dressesToShow.filter(dress => dress.sold !== true);
                }

                // Step 2: Apply search filter
                const searchTerm = document.getElementById('search-bar').value.toLowerCase();
                if (searchTerm) {
                    dressesToShow = dressesToShow.filter(dress => {
                        const searchableText = `
                            ${dress.dressInfo?.title || ''}
                            ${dress.dressInfo?.brand || ''}
                            ${dress.dressInfo?.color || ''}
                            ${dress.dressInfo?.size || ''}
                            ${dress.dressInfo?.location || ''}
                            ${dress.additionalInfo?.description || ''}
                        `.toLowerCase();
                        return searchableText.includes(searchTerm);
                    });
                }

                // Step 3: Apply category filters
                dressesToShow = this.Filters.applyAllFilters(dressesToShow);

                // Step 4: Apply sorting
                dressesToShow = this.Sorting.applySorting(dressesToShow);

                // Step 5: Update display
                this.data.displayedDresses = dressesToShow;
                this.Display.renderDresses(dressesToShow);
                this.UI.updateResultsCount(dressesToShow.length);
            },

            // Toggle show/hide sold items
            async toggleShowSold() {
                this.data.showSold = document.getElementById('toggle-sold-btn').checked;
                console.log('Show sold toggled:', this.data.showSold);
                
                // Show loading state
                const container = document.getElementById("dress-cards-container");
                const loading = document.getElementById("loading-wrapper");
                const noResults = document.getElementById("no-match-message");
                
                container.innerHTML = "";
                noResults.classList.add("hidden");
                loading.classList.remove("hidden");
                
                // Small delay for smooth UX
                await new Promise(resolve => setTimeout(resolve, 300));
                
                // Hide loading and refresh display
                loading.classList.add("hidden");
                this.refreshDisplay();
            }
        };

        // ============================================
        // DATABASE MODULE - Handles Firebase operations
        // ============================================
        DressApp.Database = {
            async loadDresses() {
                const container = document.getElementById("dress-cards-container");
                const loading = document.getElementById("loading-wrapper");
                const noResults = document.getElementById("no-match-message");

                try {
                    // Show loading state
                    loading.classList.remove("hidden");
                    container.innerHTML = "";
                    noResults.classList.add("hidden");

                    // Query Firebase for approved dresses
                    const query = db.collection("dressListings")
                        .where("status", "==", "approved")
                        .orderBy("timestamp", "desc");

                    const querySnapshot = await query.get();

                    // Hide loading state
                    loading.classList.add("hidden");

                    if (querySnapshot.empty) {
                        noResults.classList.remove("hidden");
                        DressApp.UI.updateResultsCount(0);
                        return;
                    }

                    // Store all approved dresses
                    DressApp.data.allDresses = [];
                    querySnapshot.forEach(doc => {
                        const dress = {
                            id: doc.id,
                            ...doc.data(),
                            // Ensure sold field exists (default to false if not present)
                            sold: doc.data().sold || false
                        };
                        DressApp.data.allDresses.push(dress);
                    });

                    console.log(`Loaded ${DressApp.data.allDresses.length} approved dresses`);

                } catch (error) {
                    console.error("Error loading dresses:", error);
                    loading.classList.add("hidden");

                    // Show error message
                    const noResults = document.getElementById("no-match-message");
                    noResults.classList.remove("hidden");
                    noResults.innerHTML = `
                        <i class="fas fa-exclamation-triangle text-gray-300 text-4xl mb-4"></i>
                        <h3 class="text-lg font-medium text-charcoal-800 mb-2">Error loading dresses</h3>
                        <p class="text-charcoal-600">Please refresh the page or try again later</p>
                    `;
                }
            }
        };

        // ============================================
        // FILTERS MODULE - Handles all filtering logic
        // ============================================
        DressApp.Filters = {
            // Filter configuration
            filterOptions: {
                sizes: ['0-32', '2-34', '4-36', '6-38', '8-40', '10-42', '12-44', '14-46', '16-48', '18-50'],
                brands: ['Zara', 'H&M', 'Forever 21', 'ASOS', 'Mango', 'Uniqlo', 'GAP', 'Banana Republic',
                    'Ann Taylor', 'J.Crew', 'Kate Spade', 'Michael Kors', 'Coach', 'Diane von Furstenberg',
                    'Calvin Klein', 'Tommy Hilfiger', 'Ralph Lauren', 'Hugo Boss', 'Armani', 'Gucci',
                    'Prada', 'Versace', 'Dolce & Gabbana', 'Chanel', 'Dior', 'Saint Laurent'],
                colors: ['Multi', 'Black', 'Blue', 'Brown', 'Gold', 'Green', 'Grey', 'Ivory', 'Orange',
                    'Pink', 'Purple', 'Red', 'Silver', 'White', 'Yellow'],
                conditions: ['New', 'Used'],
                categories: ['Bridal', 'Mother of the Bride/Groom', 'Sister of the Bride/Groom', 'Maternity', 'Kids']
            },

            // Apply filters button click
            applyFilters() {
                console.log('Applying filters...');

                // Update active filters from UI
                DressApp.data.activeFilters = {
                    price: parseInt(document.getElementById('priceRange').value),
                    sizes: this.getCheckedValues('sizes'),
                    brands: this.getCheckedValues('brands'),
                    colors: this.getCheckedValues('colors'),
                    condition: this.getCheckedValues('condition'),
                    category: this.getCheckedValues('category')
                };

                // Refresh the display with new filters
                DressApp.refreshDisplay();

                // Update filter pills
                this.updateActiveFilterPills();

                // Close sidebar on mobile
                if (window.innerWidth < 1024) {
                    DressApp.UI.closeFilterSidebar();
                }
            },

            // Apply all active filters to a dress array
            applyAllFilters(dresses) {
                return dresses.filter(dress => {
                    const filters = DressApp.data.activeFilters;

                    // Price filter
                    const price = dress.pricing?.askingPrice || 0;
                    if (price > filters.price) return false;

                    // Size filter
                    if (filters.sizes.length > 0 && !filters.sizes.includes(dress.dressInfo?.size)) {
                        return false;
                    }

                    // Brand filter
                    if (filters.brands.length > 0 && !filters.brands.includes(dress.dressInfo?.brand)) {
                        return false;
                    }

                    // Color filter
                    if (filters.colors.length > 0 && !filters.colors.includes(dress.dressInfo?.color)) {
                        return false;
                    }

                    // Condition filter
                    if (filters.condition.length > 0 && !filters.condition.includes(dress.dressInfo?.condition)) {
                        return false;
                    }

                    // Category filter
                    if (filters.category.length > 0 && !filters.category.includes(dress.dressInfo?.category)) {
                        return false;
                    }

                    return true;
                });
            },

            // Get checked values from a filter section
            getCheckedValues(filterType) {
                const section = document.getElementById(`section-${filterType}`);
                const checkedBoxes = section.querySelectorAll('input.option:checked');
                return Array.from(checkedBoxes).map(cb => cb.value);
            },

            // Reset all filters to default
            resetFilters() {
                console.log('Resetting all filters...');

                // Reset filter state
                DressApp.data.activeFilters = {
                    price: 5000,
                    sizes: [],
                    brands: [],
                    colors: [],
                    condition: [],
                    category: []
                };

                // Reset price slider
                document.getElementById('priceRange').value = 5000;
                this.updatePriceLabel();

                // Uncheck all checkboxes
                ['sizes', 'brands', 'colors', 'condition', 'category'].forEach(type => {
                    const section = document.getElementById(`section-${type}`);
                    section.querySelectorAll('input').forEach(cb => cb.checked = false);
                });

                // Refresh display
                DressApp.refreshDisplay();

                // Clear filter pills
                this.updateActiveFilterPills();
            },

            // Update price label
            updatePriceLabel() {
                const value = document.getElementById('priceRange').value;
                document.getElementById('priceLabel').textContent = value;
            },

            // Update active filter pills display
            updateActiveFilterPills() {
                const container = document.getElementById('active-filters');
                let html = '';
                const filters = DressApp.data.activeFilters;

                // Price pill
                if (filters.price < 5000) {
                    html += `
                        <div class="filter-pill inline-flex items-center gap-1 bg-gray-200 rounded-full px-2 py-1 text-xs">
                            <span>Up to $${filters.price}</span>
                            <i class="fas fa-times cursor-pointer" onclick="DressApp.Filters.removeFilter('price')"></i>
                        </div>
                    `;
                }

                // Other filter pills
                ['sizes', 'brands', 'colors', 'condition', 'category'].forEach(type => {
                    filters[type].forEach(value => {
                        html += `
                            <div class="filter-pill inline-flex items-center gap-1 bg-gray-200 rounded-full px-2 py-1 text-xs">
                                <span>${value}</span>
                                <i class="fas fa-times cursor-pointer" onclick="DressApp.Filters.removeFilter('${type}', '${value}')"></i>
                            </div>
                        `;
                    });
                });

                // Clear all button
                if (html) {
                    html += `
                        <button onclick="DressApp.Filters.resetFilters()" class="text-xs text-charcoal-600 hover:underline font-medium ml-2">
                            Clear All
                        </button>
                    `;
                }

                container.innerHTML = html;
            },

            // Remove a specific filter
            removeFilter(type, value) {
                if (type === 'price') {
                    DressApp.data.activeFilters.price = 5000;
                    document.getElementById('priceRange').value = 5000;
                    this.updatePriceLabel();
                } else {
                    const index = DressApp.data.activeFilters[type].indexOf(value);
                    if (index > -1) {
                        DressApp.data.activeFilters[type].splice(index, 1);
                    }
                    // Uncheck the checkbox
                    const checkbox = document.querySelector(`#section-${type} input[value="${value}"]`);
                    if (checkbox) checkbox.checked = false;
                }

                DressApp.refreshDisplay();
                this.updateActiveFilterPills();
            }
        };

        // ============================================
        // SORTING MODULE - Handles sorting logic
        // ============================================
        DressApp.Sorting = {
            sortDresses(sortType) {
                console.log('Sorting by:', sortType);
                DressApp.data.currentSort = sortType;

                // Update sort label
                const labels = {
                    'price-low': 'Price: Low to High',
                    'price-high': 'Price: High to Low',
                    'newest': 'Newest First',
                    'oldest': 'Oldest First'
                };
                document.getElementById('sort-label').textContent = labels[sortType] || 'Sort By';

                // Refresh display (sorting will be applied)
                DressApp.refreshDisplay();
            },

            applySorting(dresses) {
                const sortType = DressApp.data.currentSort;
                if (!sortType) return dresses;

                const sorted = [...dresses];

                switch (sortType) {
                    case 'price-low':
                        sorted.sort((a, b) => (a.pricing?.askingPrice || 0) - (b.pricing?.askingPrice || 0));
                        break;
                    case 'price-high':
                        sorted.sort((a, b) => (b.pricing?.askingPrice || 0) - (a.pricing?.askingPrice || 0));
                        break;
                    case 'newest':
                        sorted.sort((a, b) => {
                            const timeA = a.timestamp?.toMillis?.() || 0;
                            const timeB = b.timestamp?.toMillis?.() || 0;
                            return timeB - timeA;
                        });
                        break;
                    case 'oldest':
                        sorted.sort((a, b) => {
                            const timeA = a.timestamp?.toMillis?.() || 0;
                            const timeB = b.timestamp?.toMillis?.() || 0;
                            return timeA - timeB;
                        });
                        break;
                }

                return sorted;
            }
        };

        // ============================================
        // DISPLAY MODULE - Handles rendering dresses
        // ============================================
        DressApp.Display = {
            renderDresses(dresses) {
                const container = document.getElementById('dress-cards-container');
                const noResults = document.getElementById('no-match-message');

                if (dresses.length === 0) {
                    container.innerHTML = '';
                    noResults.classList.remove('hidden');
                } else {
                    noResults.classList.add('hidden');
                    container.innerHTML = dresses.map(dress => this.createDressCard(dress)).join('');

                    // Initialize image sliders after rendering
                    setTimeout(() => this.initializeAllSliders(), 100);
                }
            },

            createDressCard(dress) {
                const images = dress.images?.length > 0 ? dress.images : ['/images/placeholder-dress.jpg'];
                const price = this.formatCurrency(dress.pricing?.askingPrice || 0);
                const originalPrice = dress.pricing?.originalPrice
                    ? this.formatCurrency(dress.pricing.originalPrice)
                    : null;

                // Calculate days since posted
                const timestamp = dress.timestamp?.toDate() || new Date();
                const daysAgo = Math.floor((Date.now() - timestamp.getTime()) / (1000 * 60 * 60 * 24));
                const timeText = daysAgo === 0 ? 'Today' : daysAgo === 1 ? '1d ago' : `${daysAgo}d ago`;

                // Sold badge
                const soldBadge = dress.sold ? `
                    <div class="absolute top-3 right-3 bg-red-500 text-white text-xs font-bold px-2.5 py-1 rounded-full">
                        SOLD
                    </div>
                ` : '';

                const imageSliderHTML = images.map(img =>
                    `<img loading="lazy" src="${img}" alt="Dress Image" class="flex-shrink-0 w-full h-[300px] object-contain slider-image">`
                ).join('');

                const dotsHTML = images.length > 1
                    ? images.map((_, index) =>
                        `<div class="slider-dot ${index === 0 ? 'active' : ''}" onclick="ImageSlider.goToSlide(this, ${index})"></div>`
                    ).join('')
                    : '';

                return `
                    <div class="bg-white rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden ${dress.sold ? 'opacity-75' : ''}">
                        <!-- Image Container -->
                        <div class="relative w-full rounded-t-lg overflow-hidden image-slider-container ${images.length === 1 ? 'single-image' : ''} bg-zinc-100">
                            <div class="flex transition-transform duration-300 ease-in-out image-slider" data-current="0">
                                ${imageSliderHTML}
                            </div>
                            <button class="hidden sm:flex slider-nav prev" onclick="ImageSlider.slide(this, -1)">
                                <i class="fas fa-chevron-left text-gray-700 text-sm"></i>
                            </button>
                            <button class="hidden sm:flex slider-nav next" onclick="ImageSlider.slide(this, 1)">
                                <i class="fas fa-chevron-right text-gray-700 text-sm"></i>
                            </button>
                            ${soldBadge}
                            <div class="slider-dots">${dotsHTML}</div>
                        </div>
                        
                        <!-- Content -->
                        <div class="p-6">
                            <div class="mb-4">
                                <h3 class="font-bold text-charcoal-800 text-[clamp(14px,3.5vw,16px)] truncate">${dress.dressInfo.title}</h3>
                            </div>
                            
                            <div class="mb-6">
                                <div class="text-[clamp(16px,5vw,21px)] font-bold text-charcoal-700">
                                    ${price}
                                </div>
                                <div class="text-[clamp(10px,3vw,13px)] text-gray-500">
                                    Originally Paid ${originalPrice || "$ -"}
                                </div>
                            </div>
                            
                            <div class="grid grid-cols-2 gap-3 mb-4">
                                <div class="flex items-center gap-2">
                                    <i class="fas fa-ruler text-gray-400 text-[clamp(12px,3vw,14px)]"></i>
                                    <span class="text-[clamp(12px,3vw,14px)] text-gray-700">Size ${dress.dressInfo.size}</span>
                                </div>
                                <div class="flex items-center gap-2">
                                    <i class="fas fa-palette text-gray-400 text-[clamp(12px,3vw,14px)]"></i>
                                    <span class="text-[clamp(12px,3vw,14px)] text-gray-700">${dress.dressInfo.color}</span>
                                </div>
                                <div class="flex items-center gap-2">
                                    <i class="fas fa-map-marker-alt text-gray-400 text-[clamp(12px,3vw,14px)]"></i>
                                    <span class="text-[clamp(12px,3vw,14px)] text-gray-700">${dress.dressInfo.location}</span>
                                </div>
                                <div class="flex items-center gap-2">
                                    <i class="fas fa-calendar text-gray-400 text-[clamp(12px,3vw,14px)]"></i>
                                    <span class="text-[clamp(12px,3vw,14px)] text-gray-700">Posted ${timeText}</span>
                                </div>
                            </div>
                            
                            <div class="flex gap-2">
                                <button onclick='DressApp.Display.viewDressDetails(${JSON.stringify(dress).replace(/"/g, '&quot;')})' 
                                    class="flex-1 text-white py-2.5 px-4 rounded-lg font-medium bg-charcoal-800 text-cream-500 hover:bg-charcoal-900 transition-colors ${dress.sold ? 'opacity-50 cursor-not-allowed' : ''}">
                                    ${dress.sold ? 'View Details (Sold)' : 'View Details'}
                                </button>
                                <button class="px-4 py-2.5 border border-charcoal-300 rounded-lg hover:border-charcoal-400 transition-colors">
                                    <i class="fas fa-share text-charcoal-600"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            },

            formatCurrency(value) {
                return new Intl.NumberFormat("en-US", {
                    style: "currency",
                    currency: "USD",
                    minimumFractionDigits: 0,
                    maximumFractionDigits: 0
                }).format(value);
            },

            viewDressDetails(dress) {
                // Create modal for dress details
                const modal = document.createElement('div');
                modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4';

                // Build contact buttons
                let contactButtons = '';
                if (dress.sellerInfo?.contactMethods) {
                    dress.sellerInfo.contactMethods.forEach(method => {
                        if (method.toLowerCase().includes('whatsapp') && dress.sellerInfo.phone) {
                            contactButtons += `
                                <button onclick="DressApp.Display.contactSeller('${dress.dressInfo.title}', '${dress.sellerInfo.phone}', 'whatsapp')"
                                    class="text-cream-900 hover:text-charcoal-900 transition-colors text-lg p-2">
                                    <i class="fab fa-whatsapp text-xl"></i>
                                </button>
                            `;
                        }
                        if (method.toLowerCase().includes('phone') && dress.sellerInfo.phone) {
                            contactButtons += `
                                <button onclick="DressApp.Display.contactSeller('${dress.dressInfo.title}', '${dress.sellerInfo.phone}', 'call')"
                                    class="text-cream-900 hover:text-charcoal-900 transition-colors text-lg p-2">
                                    <i class="fas fa-phone text-xl"></i>
                                </button>
                            `;
                        }
                        if (method.toLowerCase().includes('text') && dress.sellerInfo.phone) {
                            contactButtons += `
                                <button onclick="DressApp.Display.contactSeller('${dress.dressInfo.title}', '${dress.sellerInfo.phone}', 'sms')"
                                    class="text-cream-900 hover:text-charcoal-900 transition-colors text-lg p-2">
                                    <i class="fas fa-sms text-xl"></i>
                                </button>
                            `;
                        }
                        if (method.toLowerCase().includes('email') && dress.sellerInfo.email) {
                            contactButtons += `
                                <button onclick="DressApp.Display.contactSeller('${dress.dressInfo.title}', '${dress.sellerInfo.email}', 'email')"
                                    class="text-cream-900 hover:text-charcoal-900 transition-colors text-lg p-2">
                                    <i class="fas fa-envelope text-xl"></i>
                                </button>
                            `;
                        }
                    });
                }

                modal.innerHTML = `
                    <div class="bg-white rounded-xl shadow-2xl max-w-lg w-full animate-slideIn">
                        <div class="sticky top-0 bg-white border-b border-gray-200 px-6 py-2 rounded-t-xl">
                            <div class="flex items-center justify-between">
                                <h2 class="text-[clamp(16px,5vw,18px)] font-semibold text-charcoal-800">
                                    Dress Details ${dress.sold ? '(SOLD)' : ''}
                                </h2>
                                <button onclick="this.closest('.fixed').remove(); DressApp.UI.restoreBodyScroll();" 
                                    class="p-2 px-4 text-gray-400 hover:text-charcoal-600 rounded-lg transition-colors">
                                    <i class="fas fa-times text-xl"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="p-6 space-y-4">
                            <div class="space-y-2">
                                <h3 class="text-charcoal-800 text-[clamp(14px,5vw,18px)] font-bold">${dress.dressInfo.title}</h3>
                                <p class="text-[clamp(10px,3vw,12px)] text-charcoal-700 font-medium">
                                    <i class="fas fa-tag text-[clamp(10px,3vw,12px)]"></i>
                                    ${dress.dressInfo.brand || 'Unknown Brand'}
                                </p>
                            </div>
                            
                            <div class="p-4 bg-gray-50 rounded-xl">
                                <p class="text-charcoal-600 text-[clamp(10px,3vw,14px)]">
                                    ${dress.additionalInfo?.description || 'No additional information'}
                                </p>
                            </div>
                            
                            ${!dress.sold ? `
                                <div class="pt-4 border-t">
                                    <div class="flex justify-between text-sm text-charcoal-700 mb-2">
                                        <span><i class="fas fa-user mr-1"></i> Contact Seller</span>
                                        <span><i class="fas fa-map-marker-alt mr-1"></i>${dress.dressInfo.location}</span>
                                    </div>
                                    <div class="flex gap-2">
                                        ${contactButtons || '<p class="text-gray-500 text-sm">No contact methods available</p>'}
                                    </div>
                                </div>
                            ` : '<p class="text-center text-red-500 font-semibold">This item has been sold</p>'}
                        </div>
                    </div>
                `;

                document.body.appendChild(modal);
                DressApp.UI.preventBodyShift(); // Use the new helper

                // Close on background click
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        modal.remove();
                        DressApp.UI.restoreBodyScroll(); // Use the new helper
                    }
                });
            },

            contactSeller(dressTitle, contact, method) {
                const message = `Hi, I'm interested in your "${dressTitle}" listing. Is it still available?`;

                switch (method) {
                    case 'whatsapp':
                        window.open(`https://wa.me/${contact}?text=${encodeURIComponent(message)}`, '_blank');
                        break;
                    case 'call':
                        window.location.href = `tel:${contact}`;
                        break;
                    case 'sms':
                        window.location.href = `sms:${contact}?body=${encodeURIComponent(message)}`;
                        break;
                    case 'email':
                        const subject = `Inquiry about "${dressTitle}"`;
                        window.location.href = `mailto:${contact}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(message)}`;
                        break;
                }
            },

            initializeAllSliders() {
                document.querySelectorAll('.image-slider-container').forEach(container => {
                    ImageSlider.initialize(container);
                });
            }
        };

        // ============================================
        // UI MODULE - Handles UI interactions
        // ============================================
        DressApp.UI = {
            toggleFilterSidebar() {
                const sidebar = document.getElementById('filterSidebar');
                const isHidden = sidebar.classList.contains('-translate-x-full');

                if (isHidden) {
                    sidebar.classList.remove('-translate-x-full');
                    sidebar.classList.add('translate-x-0');

                    // Collapse all open filter sections
                    ['price', 'sizes', 'brands', 'colors', 'condition', 'category'].forEach(id => {
                        const section = document.getElementById(`section-${id}`);
                        const icon = document.getElementById(`icon-${id}`);

                        if (section && !section.classList.contains('hidden')) {
                            section.classList.add('hidden');
                            icon.textContent = '+';
                        }
                    });
                } else {
                    this.closeFilterSidebar();
                }
            },

            closeFilterSidebar() {
                const sidebar = document.getElementById('filterSidebar');
                sidebar.classList.add('-translate-x-full');
                sidebar.classList.remove('translate-x-0');
            },

            toggleSection(id) {
                const section = document.getElementById(`section-${id}`);
                const icon = document.getElementById(`icon-${id}`);

                section.classList.toggle('hidden');
                icon.textContent = section.classList.contains('hidden') ? '+' : '';
            },

            updateResultsCount(count) {
                document.getElementById('results-count').textContent = count;
                document.getElementById('results-count-desktop').textContent = count;
            },

            preventBodyShift() {
                const scrollbarWidth = window.innerWidth - document.documentElement.clientWidth;

                document.body.style.paddingRight = `${scrollbarWidth}px`;
                document.body.style.overflow = 'hidden';
            },

            restoreBodyScroll() {
                document.body.style.paddingRight = '';
                document.body.style.overflow = '';
            },

            initializeFilterSections() {
                // Create checkboxes for each filter type
                const typeMapping = {
                    'sizes': 'sizes',
                    'brands': 'brands',
                    'colors': 'colors',
                    'condition': 'conditions',
                    'category': 'categories'
                };

                Object.keys(typeMapping).forEach(type => {
                    const section = document.getElementById(`section-${type}`);
                    const options = DressApp.Filters.filterOptions[typeMapping[type]];

                    if (options && section) {
                        section.innerHTML = options.map(option => `
                            <div class="flex items-center space-x-2">
                                <input type="checkbox" value="${option}" class="option" />
                                <label class="text-sm text-gray-700">${option}</label>
                            </div>
                        `).join('');
                    }
                });

                // Set initial price label
                DressApp.Filters.updatePriceLabel();
            }
        };

        // ============================================
        // IMAGE SLIDER - Handles image carousel
        // ============================================
        const ImageSlider = {
            slide(button, direction) {
                const container = button.closest('.image-slider-container');
                const slider = container.querySelector('.image-slider');
                const images = slider.querySelectorAll('.slider-image');
                const dots = container.querySelectorAll('.slider-dot');

                let currentIndex = parseInt(slider.dataset.current) || 0;
                currentIndex = Math.min(Math.max(currentIndex + direction, 0), images.length - 1);

                slider.style.transform = `translateX(-${currentIndex * 100}%)`;
                slider.dataset.current = currentIndex;

                dots.forEach((dot, index) => {
                    dot.classList.toggle('active', index === currentIndex);
                });
            },

            goToSlide(dot, index) {
                const container = dot.closest('.image-slider-container');
                const slider = container.querySelector('.image-slider');
                const dots = container.querySelectorAll('.slider-dot');

                slider.style.transform = `translateX(-${index * 100}%)`;
                slider.dataset.current = index;

                dots.forEach((d, i) => {
                    d.classList.toggle('active', i === index);
                });
            },

            initialize(container) {
                const slider = container.querySelector('.image-slider');
                const images = slider.querySelectorAll('.slider-image');

                if (images.length <= 1) {
                    container.classList.add('single-image');
                    return;
                }

                // Add touch/swipe support here if needed
            }
        };

        // ============================================
        // INITIALIZATION
        // ============================================
        document.addEventListener('DOMContentLoaded', () => {
            DressApp.init();
        });
    </script>
</body>

</html>